(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{27:function(e,t,a){},35:function(e,t,a){e.exports=a(76)},40:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),s=(a(40),a(1)),c=a.n(s),l=a(13),m=a(6),u=a(7),v=a(9),p=a(8),f=a(2),h=a(19),d=a(10),g=(a(42),function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateChange=function(e){e.preventDefault(),n.setState(Object(h.a)({},e.target.name,e.target.value))},n.clearInputs=function(){n.setState({userName:"",email:"",password:"",display:!1})},n.verifyCredentials=function(e){if(e.preventDefault(),!(n.state.userName||n.state.password||n.state.email))return!1;var t={email:n.state.email,password:n.state.password};n.props.authenticateUser(t),n.clearInputs()},n.state={userName:"",email:"",password:"",display:!0},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password;return this.props.login&&this.props.login.id&&""!==this.props.login.name?r.a.createElement(f.a,{to:"/"}):r.a.createElement("form",{className:"form-container"},r.a.createElement(d.b,{to:"/",className:"close-login"},"Back to Home"),r.a.createElement("h4",{className:"user-email"},"Email"),r.a.createElement("label",{htmlFor:"user-email"},r.a.createElement("input",{name:"email",type:"text",className:"user-email",id:"email",placeholder:"email",value:a,onChange:this.updateChange})),r.a.createElement("h4",{className:"password-title"},"password"),r.a.createElement("label",{htmlFor:"user-password"},r.a.createElement("input",{name:"password",type:"password",className:"password",id:"password",placeholder:"password",value:n,onChange:this.updateChange})),r.a.createElement("button",{className:"log-in-button",onClick:function(t){e.verifyCredentials(t)}},"Submit"))}}]),a}(n.Component)),E=(a(48),function(e){return r.a.createElement("div",{className:"movie-section"},e.userData.name&&r.a.createElement("h1",{className:"user-welcome"},"Welcome!"),e.userData&&r.a.createElement("h2",{className:"user-name"},e.userData.name),r.a.createElement("h3",{className:"movie-day"},"Rate your next movie"))}),b=(a(49),a(16)),k=a.n(b),N=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).displayMovieInformation=function(){e.props.getMovieDetails(e.props.movies.id),e.props.retrieveComments(e.props.movies.id)},e}return Object(u.a)(a,[{key:"toggleFavorite",value:function(e){e.preventDefault(),this.props.toggleFavorite(this.props.movies.id)}},{key:"render",value:function(){var e=this,t=this.props.movies,a=t.id,n=t.title,o=t.release_date,i=t.average_rating,s=t.poster_path;return r.a.createElement(d.c,{className:"movie-card",to:"/movies/".concat(a)},r.a.createElement("div",{role:"link",key:a,id:a,className:"card",onClick:this.displayMovieInformation},r.a.createElement("h1",{className:"movie-title"},n),r.a.createElement("h2",{className:"movie-release"},k()(o).format("LL")),this.props.favorites&&this.props.userData&&r.a.createElement("button",{className:"favorite-movie",onClick:function(t){return e.toggleFavorite(t)}},r.a.createElement("span",{role:"img","aria-label":"heart-empty"},"\u2764\ufe0f")),!this.props.favorites&&this.props.userData&&r.a.createElement("button",{className:"favorite-movie",onClick:function(t){return e.toggleFavorite(t)}},r.a.createElement("span",{role:"img","aria-label":"heart-empty"},"\u2661")),r.a.createElement("div",{className:"rating-container"},r.a.createElement("h2",{className:"movie-rating"},"Rating"),r.a.createElement("h2",{className:"movie-rating"},i.toFixed(1))),r.a.createElement("img",{name:n,id:a,className:"movie-img",src:s,alt:"".concat(n," poster")}),this.props.ratedMovies.rating?r.a.createElement("h2",{className:"user-rating"},"your rate ",this.props.ratedMovies.rating.toFixed(1)):r.a.createElement("h5",{className:"user-rating"},"not rated")))}}]),a}(n.Component),C=a(4),D=a.n(C),w=(a(51),function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateSortValue=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.getOptionValue=function(){n.props.sortMovies(n.state.value)},n.toggleFavorites=function(){n.state.favorites?n.setState({favorites:!1}):n.setState({favorites:!0})},n.state={value:"",favorites:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sort-container"},r.a.createElement("h1",{className:"cards-title"},"All movies"),r.a.createElement("div",{className:"sort-control"},r.a.createElement("label",{htmlFor:"sort-select",className:"sort-title"},"sort by"),r.a.createElement("select",{role:"menubar",className:"sort-select",name:"value",value:this.state.value,onChange:this.updateSortValue,id:"sort-select"},r.a.createElement("option",{role:"menuitem","data-testid":"none",name:"none",value:"none",htmlFor:"sort-select"},"--none--"),r.a.createElement("option",{role:"menuitem","data-testid":"descending-one",name:"average_rating",value:"descending",htmlFor:"sort-select"},"Rating descending"),r.a.createElement("option",{role:"menuitem","data-testid":"ascending",name:"average_rating",value:"ascending",htmlFor:"sort-select"},"Rating ascending")),r.a.createElement("button",{type:"apple",className:"sort",name:"sort","aria-label":"sort",onClick:this.getOptionValue},r.a.createElement("i",{type:"apple-icon",role:"img",className:"fas fa-apple-alt"})),this.props.userData&&r.a.createElement(r.a.Fragment,null,!this.state.favorites&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c,{to:"/favorites",type:"navlink",role:"button",className:"view-favorites",name:"favorites-button",onClick:this.toggleFavorites},"Favorites")),this.state.favorites&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c,{to:"/",type:"navlink",role:"button",className:"view-all",name:"all-button",onClick:this.toggleFavorites},"All")))))}}]),a}(n.Component));w.propType={sortMovies:D.a.func,status:D.a.string};a(52);var y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{sortMovies:e.sortMovies,userData:e.userData.id||""}),r.a.createElement("section",{className:"card-area"},e.movies.map((function(t,a){return r.a.createElement(N,{key:a,movies:t,getMovieDetails:e.getMovieDetails,retrieveComments:e.retrieveComments,ratedMovies:e.ratedMovies.find((function(e){return e.movie_id===t.id}))||{},favorites:e.favorites.find((function(e){return e===t.id}))||null,toggleFavorite:e.toggleFavorite,userData:e.userData.id||null})}))))},M=(a(27),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{userData:e.userData}),r.a.createElement(y,{movies:e.movies,getMovieDetails:e.getMovieDetails,sortMovies:e.sortMovies,ratedMovies:e.ratedMovies,retrieveComments:e.retrieveComments,toggleFavorite:e.toggleFavorite,favorites:e.favorites,userData:e.userData}))}),x=(a(53),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"error-section"},r.a.createElement("h1",null,"Something went wrong."),r.a.createElement("img",{alt:"Old Man Shruggin",src:"https://i.stack.imgur.com/eQ20E.jpg"})))}),O=a(32),j=a.n(O),S=(a(70),function(e){var t=e.movieDetails,a=e.ratedMovies.find((function(e){return e.movie_id===t.id}))||"",n=t.genres.map((function(e,t){return r.a.createElement("p",{className:"single-genre",key:t},"-",e)}));return r.a.createElement("div",{className:"movie-card-container"},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"overview-container"},r.a.createElement("h1",{className:"overview-container"},"Overview"),r.a.createElement("p",{className:"value overview"},t.overview)),r.a.createElement("div",{className:"box rating-container"},r.a.createElement("h1",{className:"title rating-title"},"Rating"),r.a.createElement("p",{className:"value average-rating"},t.average_rating.toFixed(1))),a&&r.a.createElement("div",{className:"box rating-container"},r.a.createElement("h1",{className:"title rating-title"},"Your rating"),r.a.createElement("p",{className:"value average-rating"},a.rating.toFixed(1))),r.a.createElement("div",{className:"box runtime-container"},r.a.createElement("h1",{className:"title runtime-title"},"Time"),r.a.createElement("p",{className:"value runtime"},0===t.runtime?"No runtime found":"".concat(t.runtime," mins."))),r.a.createElement("div",{className:"box budget-container"},r.a.createElement("h1",{className:"title budget-title"},"budget"),r.a.createElement("p",{className:"value budget"},0===t.budget?"No budget found":"$ ".concat(t.budget))),r.a.createElement("div",{className:"box revenue-container"},r.a.createElement("h1",{className:"title revenue-title"},"revenue"),r.a.createElement("p",{className:"value revenue"},0===t.revenue?"No revenue found":"$ ".concat(t.revenue))),r.a.createElement("div",{className:"box release-container"},r.a.createElement("h1",{className:"title release-title"},"release date"),r.a.createElement("p",{className:"value release"},t.release_date?k()(t.release_date).format("MMM Do YY"):"No release date found")),r.a.createElement("div",{className:"box genre-container"},r.a.createElement("h1",{className:"title genre-title"},"genres"),r.a.createElement("ul",{className:"genres"},n))))}),F=(a(71),a(34)),R=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({selectedOption:e})},n.updateRating=function(){n.props.addRating(n.state.selectedOption)},n.removeRating=function(){n.props.deleteRating()},n.state={selectedOption:null},n.ratingValue=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"}],n}return Object(u.a)(a,[{key:"toggleFavorite",value:function(e){e.preventDefault(),this.props.toggleFavorite(this.props.movieId)}},{key:"render",value:function(){var e=this,t=this.props.movieDetails,a=t.title,n=t.tagline;return r.a.createElement("div",{className:"movie-header"},r.a.createElement("h1",{className:"title"},a),r.a.createElement("h2",{className:"tagline"},n),this.props.favorites&&this.props.name&&r.a.createElement("button",{className:"favorite-movie",onClick:function(t){return e.toggleFavorite(t)}},r.a.createElement("span",{role:"img","aria-label":"heart-filled"},"\u2764\ufe0f")),!this.props.favorites&&this.props.name&&r.a.createElement("button",{className:"favorite-movie",onClick:function(t){return e.toggleFavorite(t)}},r.a.createElement("span",{role:"img","aria-label":"heart-empty"},"\u2661")),this.props.name&&r.a.createElement("div",{className:"rate-movie"},r.a.createElement("button",{className:"delete-rating",onClick:this.removeRating},"Delete Rating"),r.a.createElement(F.a,{role:"select-rating",placeholder:"Rating",className:"selector",options:this.ratingValue,value:this.state.selectedOption,onChange:this.handleChange}),r.a.createElement("button",{className:"add-rating",onClick:this.updateRating},"Rate Movie")))}}]),a}(n.Component),I=(a(72),function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getCommentId=function(t){if(!e.props.name)return!1;e.props.likeComment(t.target.id),t.target.style.color="#3d7ea6"},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.comment,t=e.author,a=e.time,n=e.comment,o=e.id,i=e.replyCount;return r.a.createElement("div",{id:o,role:"textbox",type:"comments",className:"comments"},r.a.createElement("div",{className:"user-container"},r.a.createElement("h1",{className:"user"},t),r.a.createElement("h1",{className:"time"},k()(a).from())),r.a.createElement("p",{className:"comment-text"},n),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("i",{id:o,className:i>0?"fas blue fa-thumbs-up":"fas fa-thumbs-up",onClick:this.getCommentId,name:"like",role:"button"},"like"),r.a.createElement("h3",{className:"like-count"},i)))}}]),a}(n.Component)),U=(a(73),function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateValue=function(e){e.preventDefault(),n.setState(Object(h.a)({},e.target.name,e.target.value))},n.postComment=function(e){if(e.preventDefault(),!n.state.comment||!n.props.name)return!1;n.props.newComment(n.props.movieId,n.state),n.props.retrieveComments(n.props.movieId),n.clearForm(e)},n.clearForm=function(e){e.preventDefault(),n.setState({comment:""})},n.likeComment=function(e){var t=n.props.movieComments.find((function(t){return t.id===+e})),a=t.movieId,r=t.id,o=t.likeStatus;t.likeStatus=!0,t.replyCount++,n.props.likeMovieComment(a,r,o)},n.injectComments=function(){return n.props.movieComments.map((function(e,t){return r.a.createElement(I,{key:t,comment:e,likeComment:n.likeComment,name:n.props.name})}))},n.state={comment:"",likeStatus:!1,time:k()(),replies:[]},n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"comment-container"},r.a.createElement("div",{className:"inner-comment"},r.a.createElement("h1",{className:"comment-title"},"Comments"),r.a.createElement("form",{className:"form-comment"},r.a.createElement("input",{className:"input-text",type:"text",name:"comment",maxLength:"120",placeholder:"Add your comment here",onChange:this.updateValue,value:this.state.comment}),r.a.createElement("button",{type:"comment-button",onSubmit:this.postComment,onClick:this.postComment,className:"comment-button"},"add comment"),r.a.createElement("button",{type:"clear-button",onClick:this.clearForm,name:"comment",className:"clear-button"},"clear")),this.injectComments()))}}]),a}(n.Component)),_=(a(74),function(e){var t=e.movieDetails,a=e.movieVideo,n=e.addRating,o=e.name,i=e.deleteRating,s=e.ratedMovies,c=e.newComment,l=e.movieComments,m=e.favorites,u=e.toggleFavorite,v=e.retrieveComments,p=e.likeMovieComment;return r.a.createElement("div",{className:"movie-container"},r.a.createElement("div",{className:"movie-wrapper"},r.a.createElement(R,{addRating:n,movieDetails:t,name:o.name,deleteRating:i,favorites:m.find((function(e){return e===t.id}))||null,toggleFavorite:u,movieId:t.id}),r.a.createElement("div",{className:" img-container"},r.a.createElement("img",{className:"trailer-image",src:t.backdrop_path,alt:"".concat(o.name," backdrop")})),r.a.createElement("div",{className:" trailer-container"},a.length>0&&r.a.createElement("div",{className:"trailerList"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"movie-trailer",alt:"movie trailer"},r.a.createElement(j.a,{alt:"movie trailer",controls:!0,width:350,height:250,url:"www.youtube.com/watch?v=".concat(e.key)}))})))),r.a.createElement(U,{newComment:c,movieId:t.id,name:o.name,movieComments:l,retrieveComments:v,likeMovieComment:p}),r.a.createElement(S,{name:o.name,movieDetails:t,ratedMovies:s})))}),T=function(e){var t=e.logOut,a=e.name;return r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("h1",{className:"main-title"},r.a.createElement("i",{className:"fas fa-seedling"}),"Rancid Tomatillos"),r.a.createElement("div",{className:"search-container"}),r.a.createElement("div",{className:"button-container"},r.a.createElement(d.b,{to:"/"},r.a.createElement("button",{className:"Login-button"},"home")),r.a.createElement(d.b,{to:a?"/":"/login"},r.a.createElement("button",{onClick:t,className:"Login-button"},a?"Log out":"Log in"))))};T.prototype={name:D.a.string,logOut:D.a.func};var V={fetchAllMovies:function(){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},fetchSingleMovie:function(e){var t="https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e);return fetch(t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},fetchMovieVideo:function(e){var t="https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(e,"/videos");return fetch(t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},fetchUser:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/login",t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e.user}))},fetchUserRatings:function(e){var t="https://rancid-tomatillos.herokuapp.com/api/v2/users/".concat(e,"/ratings");return fetch(t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e.ratings}))},fetchCreateUserRating:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n="https://rancid-tomatillos.herokuapp.com/api/v2/users/".concat(e,"/ratings");return fetch(n,a).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},fetchDeleteUserRating:function(e,t){var a="https://rancid-tomatillos.herokuapp.com/api/v2/users/".concat(e,"/ratings/").concat(t);return fetch(a,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e.message}))},addMovieComment:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n="http://localhost:3001/api/v1/movies/".concat(e,"/comments");return fetch(n,a).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},likeMovieComment:function(e,t,a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},r="http://localhost:3001/api/v1/movies/".concat(e,"/comments/").concat(t);return fetch(r,n).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},getMovieComments:function(e){var t="http://localhost:3001/api/v1/movies/".concat(e,"/comments");return fetch(t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},getUpdatedMovieComments:function(e,t){var a="http://localhost:3001/api/v1/movies/".concat(e,"/comments/").concat(t);return fetch(a).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},getUserFavorites:function(){return fetch("http://localhost:3001/api/v1/favorites").then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))},addUserFavorites:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("http://localhost:3001/api/v1/favorites",t).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){return e}))}},Y=(a(75),function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).authenticateUser=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.fetchUser(a);case 3:(n=t.sent)?(e.setState({userData:n}),e.getUserRatings(e.state.userData),e.setState({error:""})):alert("Those aren't the right credentials"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({error:"You've got a log in error: Error".concat(t.t0.status)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.getUserRatings=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.fetchUserRatings(a.id);case 3:return n=t.sent,e.setState({ratedMovies:n}),t.next=7,e.retrieveFavorites();case 7:e.setState({error:""}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.setState({error:"You've got user rating error: Error ".concat(t.t0.status)});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.logOut=function(){e.setState({userData:{id:null,name:"",email:""}})},e.getMovieDetails=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.fetchMovieVideo(a);case 3:return n=t.sent,t.next=6,V.fetchSingleMovie(a);case 6:r=t.sent,e.setState({movieID:a,movieDetails:r.movie,movieVideo:n.videos}),e.setState({error:""}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.setState({error:"You've got a movie detail error: Error ".concat(t.t0.status)});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),e.sortMovies=function(t){if(t&&"--none--"!==t){if("descending"===t){var a=e.state.movies.sort((function(e,t){return e.average_rating-t.average_rating}));e.setState({searchDirections:a})}else if("ascending"===t){var n=e.state.movies.sort((function(e,t){return t.average_rating-e.average_rating}));e.setState({searchDirections:n})}}else e.setState({searchDirections:e.state.movies})},e.addRating=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.ratedMovies.find((function(t){return t.movie_id===e.state.movieID})),a){t.next=5;break}return t.abrupt("return",alert("You have to select a rating to rate a movie!"));case 5:if(n){t.next=24;break}return t.prev=6,r={movie_id:e.state.movieID,rating:a.value},t.next=10,V.fetchCreateUserRating(e.state.userData.id,r);case 10:return t.next=12,V.fetchUserRatings(e.state.userData.id);case 12:o=t.sent,e.getMovieDetails(e.state.movieID),e.loadAllMovies(),e.setState({ratedMovies:o}),e.setState({error:""}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),e.setState({error:"You've got a rating error: Error ".concat(t.t0.status)});case 22:t.next=25;break;case 24:alert("you already rated this movie! Delete it first to rate again!");case 25:case"end":return t.stop()}}),t,null,[[6,19]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteRating=Object(l.a)(c.a.mark((function t(){var a,n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.userData.id,n=e.state.ratedMovies.find((function(t){return t.movie_id===e.state.movieID}))?e.state.ratedMovies.find((function(t){return t.movie_id===e.state.movieID})).id:"",!e.state.userData.id||!n){t.next=14;break}return t.next=5,V.fetchDeleteUserRating(a,n);case 5:return t.next=7,V.fetchUserRatings(e.state.userData.id);case 7:r=t.sent,e.getMovieDetails(e.state.movieID),e.loadAllMovies(),e.setState({ratedMovies:r}),e.setState({error:""}),t.next=15;break;case 14:alert("There is no rating to delete!");case 15:case"end":return t.stop()}}),t)}))),e.retrieveFavorites=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.getUserFavorites();case 3:a=t.sent,e.setState({favorites:a}),e.setState({error:""}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({error:"You've got a retrieving favorite error: Error ".concat(t.t0.status)});case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.toggleFavorite=function(){var t=Object(l.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.addUserFavorites({id:a});case 3:return t.next=5,e.retrieveFavorites();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({error:"You've got a toggle favorite error: Error ".concat(t.t0.status)});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.newComment=function(){var t=Object(l.a)(c.a.mark((function t(a,n){var r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.userData.name,o={comment:n.comment,author:r,time:n.time,likeStatus:n.likeStatus,replyCount:0,replies:[]},r){t.next=4;break}return t.abrupt("return",!1);case 4:return t.prev=4,t.next=7,V.addMovieComment(a,o);case 7:e.setState({error:""}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),e.setState({error:"You've got a new comment error: Error ".concat(t.t0.status)});case 13:e.retrieveComments(a);case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,a){return t.apply(this,arguments)}}(),e.retrieveComments=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.getMovieComments(a);case 3:n=t.sent,e.setState({movieComments:n.comments}),e.setState({error:""}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({error:"You've got a retrieve comment error: Error ".concat(t.t0.status)});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.likeMovieComment=function(){var t=Object(l.a)(c.a.mark((function t(a,n,r){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.userData.name){t.next=3;break}return t.abrupt("return",!1);case 3:return t.prev=3,o={likeStatus:r},t.next=7,V.likeMovieComment(a,n,o);case 7:e.retrieveComments(a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({error:"You've got a like movie comment error: Error ".concat(t.t0.status)});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e.state={userData:{id:null,name:"",email:""},movies:[],movieComments:[],ratedMovies:[],movieID:null,movieDetails:{},movieVideo:{},favorites:[],searchDirections:"",error:""},e}return Object(u.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:{errorMessage:e,errorInfo:t}})}},{key:"loadAllMovies",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.fetchAllMovies();case 3:t=e.sent,this.setState({movies:t.movies}),this.setState({error:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({error:"You've got a movie loading error: Error ".concat(e.t0.status)});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadAllMovies();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"login-info"},r.a.createElement("b",null,this.state.userData.email?this.state.userData.name+" is currently ":"not "),"logged in",this.state.error&&r.a.createElement("p",null,this.state.error)),r.a.createElement(T,{name:this.state.userData.name,logOut:this.logOut}),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/login",render:function(){return r.a.createElement(g,{authenticateUser:e.authenticateUser,login:e.state.userData})}}),r.a.createElement(f.b,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{userData:e.state.userData,movies:e.state.searchDirections||e.state.movies,movieComments:e.state.movieComments,getMovieDetails:e.getMovieDetails,sortMovies:e.sortMovies,ratedMovies:e.state.ratedMovies,retrieveComments:e.retrieveComments,favorites:e.state.favorites,toggleFavorite:e.toggleFavorite})}}),r.a.createElement(f.b,{exact:!0,path:"/movies/".concat(this.state.movieID),render:function(){return r.a.createElement(_,{addRating:e.addRating,deleteRating:e.deleteRating,movieDetails:e.state.movieDetails,movieVideo:e.state.movieVideo,name:e.state.userData,ratedMovies:e.state.ratedMovies,favorites:e.state.favorites,toggleFavorite:e.toggleFavorite,newComment:e.newComment,retrieveComments:e.retrieveComments,movieComments:e.state.movieComments,likeMovieComment:e.likeMovieComment})}}),r.a.createElement(f.b,{exact:!0,path:"/favorites",render:function(){return r.a.createElement(M,{userData:e.state.userData,movies:e.state.movies.filter((function(t){return e.state.favorites.includes(t.id)})),getMovieDetails:e.getMovieDetails,sortMovies:e.sortMovies,ratedMovies:e.state.ratedMovies,retrieveComments:e.retrieveComments,favorites:e.state.favorites,toggleFavorite:e.toggleFavorite})}}),r.a.createElement(f.b,{exact:!0,path:"*",render:function(){return r.a.createElement(x,null)}})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(d.a,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.0269227f.chunk.js.map